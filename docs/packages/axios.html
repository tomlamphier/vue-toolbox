<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Axios for HTTP | Vue Toolbox</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/vue-toolbox/assets/css/0.styles.1503c82f.css" as="style"><link rel="preload" href="/vue-toolbox/assets/js/app.640c188f.js" as="script"><link rel="preload" href="/vue-toolbox/assets/js/14.5fc27a35.js" as="script"><link rel="prefetch" href="/vue-toolbox/assets/js/10.3f33daee.js"><link rel="prefetch" href="/vue-toolbox/assets/js/11.c4cbc3d4.js"><link rel="prefetch" href="/vue-toolbox/assets/js/12.1b0c888a.js"><link rel="prefetch" href="/vue-toolbox/assets/js/13.380bf035.js"><link rel="prefetch" href="/vue-toolbox/assets/js/15.a971dcca.js"><link rel="prefetch" href="/vue-toolbox/assets/js/16.f8e90c14.js"><link rel="prefetch" href="/vue-toolbox/assets/js/17.63a36e24.js"><link rel="prefetch" href="/vue-toolbox/assets/js/18.072eb936.js"><link rel="prefetch" href="/vue-toolbox/assets/js/19.90678a16.js"><link rel="prefetch" href="/vue-toolbox/assets/js/2.588184b9.js"><link rel="prefetch" href="/vue-toolbox/assets/js/20.d8f7002a.js"><link rel="prefetch" href="/vue-toolbox/assets/js/21.d7b0d8bf.js"><link rel="prefetch" href="/vue-toolbox/assets/js/22.2e024eab.js"><link rel="prefetch" href="/vue-toolbox/assets/js/23.df0cb42e.js"><link rel="prefetch" href="/vue-toolbox/assets/js/24.4cb085e9.js"><link rel="prefetch" href="/vue-toolbox/assets/js/25.6665e21d.js"><link rel="prefetch" href="/vue-toolbox/assets/js/26.e4eb88cc.js"><link rel="prefetch" href="/vue-toolbox/assets/js/27.49de31ef.js"><link rel="prefetch" href="/vue-toolbox/assets/js/28.f3b818da.js"><link rel="prefetch" href="/vue-toolbox/assets/js/3.de9dfb0e.js"><link rel="prefetch" href="/vue-toolbox/assets/js/4.24ae86bb.js"><link rel="prefetch" href="/vue-toolbox/assets/js/5.9df7d968.js"><link rel="prefetch" href="/vue-toolbox/assets/js/6.47b40fd9.js"><link rel="prefetch" href="/vue-toolbox/assets/js/7.80881377.js"><link rel="prefetch" href="/vue-toolbox/assets/js/8.ef1fc5fa.js"><link rel="prefetch" href="/vue-toolbox/assets/js/9.1386b786.js">
    <link rel="stylesheet" href="/vue-toolbox/assets/css/0.styles.1503c82f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-toolbox/" class="home-link router-link-active"><!----> <span class="site-name">Vue Toolbox</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-toolbox/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Components</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/" class="nav-link">Basics</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template1.html" class="nav-link">Template 1</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template2.html" class="nav-link">Template 2</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template3.html" class="nav-link">Template 3</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template4.html" class="nav-link">Template 4</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template5.html" class="nav-link">Template 5</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/script1.html" class="nav-link">Script 1</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/script2.html" class="nav-link">Script 2</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/script3.html" class="nav-link">Script 3</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/nesting.html" class="nav-link">Nesting Components</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Routing</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/routing/routing1.html" class="nav-link">Routing</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/routing/routing2.html" class="nav-link">Install and Configure Router</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/routing/routing3.html" class="nav-link">Navbar</a></li></ul></div></div><div class="nav-item"><a href="/vue-toolbox/vuex/" class="nav-link">Vuex</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tasks</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/tasks/jsfiddle.html" class="nav-link">Jsfiddle</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/tasks/bootstrap.html" class="nav-link">Bootstrap</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/tasks/placeholder.html" class="nav-link">Placeholder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Packages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/packages/axios.html" class="nav-link router-link-exact-active router-link-active">Axios for HTTP</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/packages/datatables.html" class="nav-link">Datatables</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-toolbox/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Components</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/" class="nav-link">Basics</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template1.html" class="nav-link">Template 1</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template2.html" class="nav-link">Template 2</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template3.html" class="nav-link">Template 3</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template4.html" class="nav-link">Template 4</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/template5.html" class="nav-link">Template 5</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/script1.html" class="nav-link">Script 1</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/script2.html" class="nav-link">Script 2</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/script3.html" class="nav-link">Script 3</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/components/nesting.html" class="nav-link">Nesting Components</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Routing</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/routing/routing1.html" class="nav-link">Routing</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/routing/routing2.html" class="nav-link">Install and Configure Router</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/routing/routing3.html" class="nav-link">Navbar</a></li></ul></div></div><div class="nav-item"><a href="/vue-toolbox/vuex/" class="nav-link">Vuex</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tasks</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/tasks/jsfiddle.html" class="nav-link">Jsfiddle</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/tasks/bootstrap.html" class="nav-link">Bootstrap</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/tasks/placeholder.html" class="nav-link">Placeholder</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Packages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-toolbox/packages/axios.html" class="nav-link router-link-exact-active router-link-active">Axios for HTTP</a></li><li class="dropdown-item"><!----> <a href="/vue-toolbox/packages/datatables.html" class="nav-link">Datatables</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue-toolbox/packages/axios.html" class="active sidebar-link">Axios for HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-toolbox/packages/axios.html#install-and-boilerplate-code" class="sidebar-link">Install and Boilerplate Code</a></li><li class="sidebar-sub-header"><a href="/vue-toolbox/packages/axios.html#a-simple-get-example" class="sidebar-link">A Simple GET Example</a></li><li class="sidebar-sub-header"><a href="/vue-toolbox/packages/axios.html#post-example" class="sidebar-link">POST Example</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="axios-for-http"><a href="#axios-for-http" aria-hidden="true" class="header-anchor">#</a> Axios for HTTP</h1> <p>vue-axios is a package for making API requests against a back end server or remote service.  It uses standard HTTP calls and gets back JSON data.  Axios operates asynchronously, hence you chain an HTTP command with a then clause (the handler for the response message) and optionally a catch clause for errors.</p> <p>A brief tutorial in the vue documentation can be found at <a href="https://vuejs.org/v2/cookbook/using-axios-to-consume-apis.html" target="_blank" rel="noopener noreferrer">this address<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="install-and-boilerplate-code"><a href="#install-and-boilerplate-code" aria-hidden="true" class="header-anchor">#</a> Install and Boilerplate Code</h2> <div class="language- extra-class"><pre class="language-text"><code>npm install --save axios vue-axios
</code></pre></div><p>In main.js:</p> <div class="language- extra-class"><pre class="language-text"><code>import axios from 'axios'
import VueAxios from 'vue-axios'

Vue.use(VueAxios, axios) 
</code></pre></div><p>Also, because of cross origin restrictions, you need this on the server side in the controller, just above the URI mapping a-note.</p> <div class="language- extra-class"><pre class="language-text"><code>@CrossOrigin(origins = &quot;http://localhost:8081&quot;)
</code></pre></div><p>8081 is the port the vue app is running on.</p> <h2 id="a-simple-get-example"><a href="#a-simple-get-example" aria-hidden="true" class="header-anchor">#</a> A Simple GET Example</h2> <p>This example is from the NYC Neighborhoods project.  We want to retrieve a list of complaint types from the back end server.  There are two parts to this:</p> <ol><li>Vue code in the component's created() section</li></ol> <div class="language- extra-class"><pre class="language-text"><code>created() {
  this.axios.get('http://localhost:8080/complaints')
    .then(response =&gt; {
      this.complaints = response.data  // save response
      this.isLoaded = true             // set switch to loaded
    })
    .catch(error =&gt; console.log(error))
  },
</code></pre></div><ol start="2"><li>Controller code in the spring application</li></ol> <div class="language- extra-class"><pre class="language-text"><code>@RestController
public class ComplaintController {
    @Autowired
    ComplaintRepository complaintRepository;

    @CrossOrigin(origins = &quot;http://localhost:8081&quot;)
    @GetMapping(&quot;/complaints&quot;)
    public List&lt;Complaint&gt; getComplaints() {
        return complaintRepository.findAllByOrderByType();
    }
}

</code></pre></div><h2 id="post-example"><a href="#post-example" aria-hidden="true" class="header-anchor">#</a> POST Example</h2> <p>You can pass parameters with a GET request, but I have found that anything you'd want to do that way could be done with a POST.  Rather than trying to remember the coding for a GET, it's easier to stick with POST.</p> <p>The first thing you do for a POST is to create an object to hold the data.</p> <div class="language- extra-class"><pre class="language-text"><code>dat = {
  neighborhoods: this.selnh,
  complaints: this.selcompl
}
</code></pre></div><p>Next, you include it in a call to axios.</p> <div class="language- extra-class"><pre class="language-text"><code>this.axios.post('http://localhost:8080/choropleth', dat)
.then(- - - some processing - - -)
</code></pre></div><p>On the server side we define a bean class to receive the data.  Spring takes care of marshalling the data fields.</p> <div class="language- extra-class"><pre class="language-text"><code>package com.datasciex.rest311a.beans;

import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;

public class ChoroplethQuery {
    private String[] neighborhoods;
    private String[] complaints;

    @JsonCreator
    public ChoroplethQuery(@JsonProperty(&quot;neighborhoods&quot;) String[] neighborhoods,
                           @JsonProperty(&quot;complaints&quot;) String[] complaints) {
        this.neighborhoods = neighborhoods;
        this.complaints = complaints;
    }

    public String[] getNeighborhoods() {
        return neighborhoods;
    }
    public String[] getComplaints() {return complaints;}

}
</code></pre></div><p>Note that we use @JsonProperty to bind the JSON key names to our Java fields. And the get functions are required. Now we can use our query bean in our controller to insert the data.</p> <div class="language- extra-class"><pre class="language-text"><code>    @CrossOrigin(origins = &quot;http://localhost:8081&quot;)
    @PostMapping(&quot;/choropleth&quot;)
    public ChoroplethQueryRes choro(@RequestBody ChoroplethQuery choroplethQuery) {
    - - - process - - -
  }
</code></pre></div><p>The above code returns a class called ChoroplethQueryRes, which is another bean that we define to translate our Java result back to JSON.  Provided we have defined this bean correctly, Spring will take care of producing a JSON response to go back to the client.  Here is the code:</p> <div class="language- extra-class"><pre class="language-text"><code>package com.datasciex.rest311a.beans;

public class ChoroplethQueryRes {
    private Count[] counts;

    public ChoroplethQueryRes() {}

    public ChoroplethQueryRes(Count[] counts) {
        this.counts = counts;
    }

    public Count[] getCounts() {
        return counts;
    }
}
</code></pre></div><p>Doing a POST may seem like a lot of work, but it is a simple series of steps that are easy to set up and verify.</p> <ol><li>Create a javascript object to hold your POST parameters, use it in the axios call after the URL.</li> <li>Define a bean that matches the POST input field for field, use it with the @RequestBody a-note.</li> <li>Define a bean to hold the query result, make that the return type of the controller function.</li></ol></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/vue-toolbox/assets/js/app.640c188f.js" defer></script><script src="/vue-toolbox/assets/js/14.5fc27a35.js" defer></script>
  </body>
</html>
