(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{183:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("vue-axios is a package for making API requests against a back end server or remote service.  It uses standard HTTP calls and gets back JSON data.  Axios operates asynchronously, hence you chain an HTTP command with a then clause (the handler for the response message) and optionally a catch clause for errors.")]),t._v(" "),s("p",[t._v("A brief tutorial in the vue documentation can be found at "),s("a",{attrs:{href:"https://vuejs.org/v2/cookbook/using-axios-to-consume-apis.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("this address"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(1),t._v(" "),t._m(2),s("p",[t._v("In main.js:")]),t._v(" "),t._m(3),s("p",[t._v("Also, because of cross origin restrictions, you need this on the server side in the controller, just above the URI mapping a-note.")]),t._v(" "),t._m(4),s("p",[t._v("8081 is the port the vue app is running on.")]),t._v(" "),t._m(5),t._v(" "),s("p",[t._v("This example is from the NYC Neighborhoods project.  We want to retrieve a list of complaint types from the back end server.  There are two parts to this:")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),s("p",[t._v("You can pass parameters with a GET request, but I have found that anything you'd want to do that way could be done with a POST.  Rather than trying to remember the coding for a GET, it's easier to stick with POST.")]),t._v(" "),s("p",[t._v("The first thing you do for a POST is to create an object to hold the data.")]),t._v(" "),t._m(11),s("p",[t._v("Next, you include it in a call to axios.")]),t._v(" "),t._m(12),s("p",[t._v("On the server side we define a bean class to receive the data.  Spring takes care of marshalling the data fields.")]),t._v(" "),t._m(13),s("p",[t._v("Note that we use @JsonProperty to bind the JSON key names to our Java fields. And the get functions are required. Now we can use our query bean in our controller to insert the data.")]),t._v(" "),t._m(14),s("p",[t._v("The above code returns a class called ChoroplethQueryRes, which is another bean that we define to translate our Java result back to JSON.  Provided we have defined this bean correctly, Spring will take care of producing a JSON response to go back to the client.  Here is the code:")]),t._v(" "),t._m(15),s("p",[t._v("Doing a POST may seem like a lot of work, but it is a simple series of steps that are easy to set up and verify.")]),t._v(" "),t._m(16)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"axios-for-http"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#axios-for-http","aria-hidden":"true"}},[this._v("#")]),this._v(" Axios for HTTP")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"install-and-boilerplate-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-and-boilerplate-code","aria-hidden":"true"}},[this._v("#")]),this._v(" Install and Boilerplate Code")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install --save axios vue-axios\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("import axios from 'axios'\nimport VueAxios from 'vue-axios'\n\nVue.use(VueAxios, axios) \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('@CrossOrigin(origins = "http://localhost:8081")\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"a-simple-get-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-simple-get-example","aria-hidden":"true"}},[this._v("#")]),this._v(" A Simple GET Example")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("Vue code in the component's created() section")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("created() {\n  this.axios.get('http://localhost:8080/complaints')\n    .then(response => {\n      this.complaints = response.data  // save response\n      this.isLoaded = true             // set switch to loaded\n    })\n    .catch(error => console.log(error))\n  },\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"2"}},[e("li",[this._v("Controller code in the spring application")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('@RestController\npublic class ComplaintController {\n    @Autowired\n    ComplaintRepository complaintRepository;\n\n    @CrossOrigin(origins = "http://localhost:8081")\n    @GetMapping("/complaints")\n    public List<Complaint> getComplaints() {\n        return complaintRepository.findAllByOrderByType();\n    }\n}\n\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"post-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#post-example","aria-hidden":"true"}},[this._v("#")]),this._v(" POST Example")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("dat = {\n  neighborhoods: this.selnh,\n  complaints: this.selcompl\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("this.axios.post('http://localhost:8080/choropleth', dat)\n.then(- - - some processing - - -)\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('package com.datasciex.rest311a.beans;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic class ChoroplethQuery {\n    private String[] neighborhoods;\n    private String[] complaints;\n\n    @JsonCreator\n    public ChoroplethQuery(@JsonProperty("neighborhoods") String[] neighborhoods,\n                           @JsonProperty("complaints") String[] complaints) {\n        this.neighborhoods = neighborhoods;\n        this.complaints = complaints;\n    }\n\n    public String[] getNeighborhoods() {\n        return neighborhoods;\n    }\n    public String[] getComplaints() {return complaints;}\n\n}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('    @CrossOrigin(origins = "http://localhost:8081")\n    @PostMapping("/choropleth")\n    public ChoroplethQueryRes choro(@RequestBody ChoroplethQuery choroplethQuery) {\n    - - - process - - -\n  }\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("package com.datasciex.rest311a.beans;\n\npublic class ChoroplethQueryRes {\n    private Count[] counts;\n\n    public ChoroplethQueryRes() {}\n\n    public ChoroplethQueryRes(Count[] counts) {\n        this.counts = counts;\n    }\n\n    public Count[] getCounts() {\n        return counts;\n    }\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("Create a javascript object to hold your POST parameters, use it in the axios call after the URL.")]),this._v(" "),e("li",[this._v("Define a bean that matches the POST input field for field, use it with the @RequestBody a-note.")]),this._v(" "),e("li",[this._v("Define a bean to hold the query result, make that the return type of the controller function.")])])}],!1,null,null,null);e.default=n.exports}}]);